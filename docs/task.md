# タスクリスト

このドキュメントは、GoRogue開発プロジェクトのタスク管理を行います。

## オリジナルローグとの比較分析

### オリジナルローグ（1980年代）の主要特徴
- **26階層のダンジョン** - 地下26階まで降りてイェンダーの魔除けを取得
- **識別システム** - アイテムの正体を識別する必要がある
- **永続的なキャラクター成長** - 経験値とレベルアップシステム
- **空腹システム** - 食料管理が重要なゲーム要素
- **複雑な戦闘システム** - 命中率、回避、クリティカルヒット
- **豊富なアイテム** - 武器、防具、指輪、巻物、薬、食料
- **モンスターの多様性** - 各階層に特定のモンスターが出現
- **パーマデス** - 死亡時にキャラクターが失われる

## 完了済み (Done)

### 基本システム ✅
- [x] **ゲームフレームワーク**
    - [x] Go + Gruid によるゲーム基盤
    - [x] SDL2グラフィックス対応
    - [x] ゲームループの実装
    - [x] 状態管理システム

### プレイヤーシステム ✅
- [x] **プレイヤー機能**
    - [x] 基本ステータス（HP、攻撃力、防御力、レベル）
    - [x] 経験値とレベルアップシステム
    - [x] 空腹システム
    - [x] ゴールド管理
    - [x] 8方向移動（hjkl + yubn + カーソルキー）

### ダンジョンシステム ✅
- [x] **ダンジョン生成**
    - [x] 手続き生成による部屋と通路
    - [x] 壁と床のタイル管理
    - [x] 衝突判定システム
    - [x] 特別な部屋の生成

### モンスターシステム ✅
- [x] **モンスター機能**
    - [x] 8種類のモンスター（B,D,E,F,G,O,S,T）
    - [x] 基本AI（プレイヤー追跡）
    - [x] 階層別モンスター出現
    - [x] 戦闘システム
    - [x] 壁衝突判定

### アイテムシステム ✅
- [x] **アイテム機能**
    - [x] 8種類のアイテム（武器、防具、指輪、巻物、薬、食料、金、魔除け）
    - [x] 階層別アイテム配置
    - [x] 自動取得システム
    - [x] カラー表示

### UI/UXシステム ✅
- [x] **ユーザーインターフェース**
    - [x] ステータス表示（2行）
    - [x] メッセージログ（7行）
    - [x] カラフルな表示
    - [x] リアルタイム情報更新

### 開発者機能 ✅
- [x] **ウィザードモード**
    - [x] チート機能（金、レベル、回復等）
    - [x] デバッグ機能
    - [x] テスト支援機能

## 未実装 (TODO) - オリジナルローグとの差分

### 🔴 優先度: 最高（ゲームプレイに必須）
- [ ] **階層システム**
    - [ ] 26階層ダンジョン実装
    - [ ] 階段による階層移動
    - [ ] 階層別難易度調整
    - [ ] 最終階層（イェンダーの魔除け）

- [ ] **アイテム識別システム**
    - [ ] 未識別アイテム（"?"表示）
    - [ ] 識別の巻物
    - [ ] アイテム呪い/祝福システム
    - [ ] 装備システム（武器・防具の実際の効果）

- [ ] **インベントリシステム**
    - [ ] アイテム所持制限
    - [ ] インベントリ画面（i キー）
    - [ ] アイテム使用・装備・投擲
    - [ ] アイテム並び替え

### 🟡 優先度: 高（ゲーム体験向上）
- [ ] **戦闘システム改良**
    - [ ] 命中率・回避システム
    - [ ] クリティカルヒット
    - [ ] 状態異常（毒、麻痺、混乱等）
    - [ ] 武器・防具の実際の効果反映

- [ ] **高度なモンスターAI**
    - [ ] モンスター固有の行動パターン
    - [ ] 睡眠・起床システム
    - [ ] 群れ行動
    - [ ] 特殊攻撃（毒、石化、テレポート等）

- [ ] **ダンジョン生成改良**
    - [ ] 扉システム（開閉、鍵付き）
    - [ ] 隠し扉・秘密通路
    - [ ] 罠システム
    - [ ] 迷路タイプの階層

### 🟢 優先度: 中（利便性向上）
- [ ] **ゲーム状態管理**
    - [ ] セーブ/ロードシステム
    - [ ] ゲームオーバー処理
    - [ ] スコア計算システム
    - [ ] 死亡メッセージ

- [ ] **UI/UX改善**
    - [ ] ヘルプシステム（? キー）
    - [ ] インベントリ操作画面
    - [ ] アイテム詳細表示
    - [ ] ゲーム設定画面

### 🔵 優先度: 低（追加機能）
- [ ] **拡張機能**
    - [ ] 効果音・BGM
    - [ ] アニメーション効果
    - [ ] 統計情報表示
    - [ ] 実績システム

## 現在の完成度評価

### GoRogue vs オリジナルローグ

**🎯 ゲームプレイ完成度: 70%**
- ✅ 基本的なローグライクゲーム体験は完成
- ✅ 戦闘、アイテム、モンスターシステムが動作
- ❌ 識別システム、階層システムが未実装
- ❌ インベントリ管理が未実装

**🎨 視覚・UI完成度: 90%**
- ✅ SDL2による美しいグラフィックス
- ✅ カラー表示、直感的UI
- ✅ オリジナルローグより優れた視覚体験
- ❌ インベントリ画面、ヘルプ画面が未実装

**⚙️ システム完成度: 85%**
- ✅ 堅牢なゲームエンジン
- ✅ 拡張可能な設計
- ✅ デバッグ・開発者機能
- ❌ セーブ/ロード機能が未実装

**🎮 総合評価: 80%**
GoRogueは既に**プレイ可能な本格的ローグライク**として完成しており、多くの点でオリジナルローグの機能を実装済み。特にグラフィックスとUI面ではオリジナルを上回る。主な未実装要素は階層システムと識別システム。

## 技術的な詳細分析

### 実装されている機能の詳細

**🎮 ゲームエンジン**
- ✅ Gruid + SDL2によるクロスプラットフォーム対応
- ✅ 堅牢な状態管理（メニュー、ゲーム、ウィザードモード）
- ✅ 効率的なターンベースループ
- ✅ リアルタイムレンダリング

**👤 プレイヤーシステム**
- ✅ 完全なステータス管理（Lv, HP/MaxHP, Atk, Def, Exp, Gold, Hunger）
- ✅ 経験値ベースのレベルアップ
- ✅ 空腹システムとダメージ
- ✅ 8方向移動＋衝突判定

**🏰 ダンジョンシステム**
- ✅ 手続き生成（15-30部屋、通路接続）
- ✅ 特別な部屋生成（5階ごと）
- ✅ 壁・床・扉の完全なタイル管理
- ✅ 効率的な衝突判定システム

**👹 モンスターシステム**
- ✅ 8種類のモンスター（階層別出現）
- ✅ 追跡AI（ランダム要素25%）
- ✅ ターン管理（Speed値による行動頻度）
- ✅ 完全な衝突判定（壁・モンスター間）

**💎 アイテムシステム**
- ✅ 8カテゴリのアイテム（効果実装済み）
- ✅ 階層別レアリティシステム
- ✅ 自動効果発動（金、食料、薬）
- ✅ カラーコード表示

### 次の開発ステップ（優先順）

**Phase 1: インベントリシステム**
1. インベントリ画面UI
2. アイテム使用・装備機能
3. 所持制限システム

**Phase 2: 階層システム**
1. 階段配置と移動機能
2. 26階層ダンジョン
3. 階層別難易度調整

**Phase 3: 識別システム**
1. 未識別アイテム
2. 識別手段の実装
3. 装備効果の実装

## 開発環境
- **言語**: Go 1.21+
- **フレームワーク**: Gruid (github.com/anaseto/gruid)
- **開発ツール**: VS Code, Go tools
- **バージョン管理**: Git

## 参考資料
- [Gruidライブラリドキュメント](https://github.com/anaseto/gruid)
- [Go言語仕様](https://golang.org/ref/spec)
- [Roguelike開発リソース](http://www.roguebasin.com/)